---
title: "Real Estate"
author: "Grace Bianchi"
date: '2022-10-21'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(janitor)
library(googlesheets4)

MSA_demo_data <- read_sheet("https://docs.google.com/spreadsheets/d/12do9sRCAcrIe0K-VcJWXNmmTm_jg5rKjZ0NeJPOm9Jw/edit#gid=0")

city_realEstate_data <- read_sheet("https://docs.google.com/spreadsheets/d/10n55Gt0rySN96OGTQ2_8PzeTcX66n26sOlZBiuiAeBU/edit#gid=808954990")
```

```{r}
# aggregate yardi data into MSAs by cbsa
MSA_realEstate_data <- city_realEstate_data %>% 
  clean_names() %>% 
  group_by(cbsa) %>% 
  summarize(avg_rent_2021 = mean(average_rent_2021, na.rm = TRUE),
            avg_rent_2022 = mean(x2022_rent, na.rm = TRUE),
            avg_occupancy_21 = mean(percent_occupancy_2021, na.rm = TRUE))
  
  
```

```{r}
# combine real estate and demographic data by cbsa
MSA_demo_data <- MSA_demo_data %>% 
  left_join(MSA_realEstate_data)
```

```{r}
# calculate rent to income ratio
compliedMSA_realEstate <- MSA_demo_data %>% 
  mutate(income_to_rent = median_income_USD_2021/avg_rent_2021)



# YoY rent change
```

```{r}
# calculate income to home price
```

```{r}

```

```{r}
# normalize everything into new data table

normalized <- 

```

```{r}
# invert normalized rent to income ratio so lower values (more favorable) have higher scores

= 1- normalized score
```

```{r}
# weights from owen

# place holder column
MSA_real_estate_score <- 
  mutate

weights <- c()

```

