---
title: "landlord"
author: "Virginia Pan"
date: "10/21/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(googlesheets4)
library(janitor)
library(tidyverse)
library(kableExtra)

MSA_landlord_data <- read_sheet("https://docs.google.com/spreadsheets/d/1zCePYRyJ5lb1Z5jvCujg17EtwqpxJN1E1_HwJL66uLM/edit#gid=122953884") 
```

```{r}
# #rent_control
# MSA_landlord_data <- MSA_landlord_data %>% 
#   mutate(
#     rent_control_binary = case_when(
#       rent_control == "N" ~ 1, 
#       rent_control == "Y" ~ 0))

#security_deposit_limit
MSA_landlord_data <- MSA_landlord_data %>% 
  mutate(
    security_depopsit_limit_num = case_when(
      security_deposit_limit == "N" ~ 1.0, 
      security_deposit_limit == "1_month_rent" ~ 0.0,
      security_deposit_limit == "2_months_rent" ~ 0.5))

#notice_of_entry_days
MSA_landlord_data <- MSA_landlord_data %>% 
  mutate(
    notice_for_entry_days_num = case_when(
      notice_for_entry_days == "N" ~ 1.0, 
      notice_for_entry_days == "0" ~ 1.0,
      notice_for_entry_days == "0.5" ~ 0.75,
      notice_for_entry_days == "1" ~ 0.5,
      notice_for_entry_days == "2" ~ 0.0,))
```

```{r}
#normalize eviction notice (days)
MSA_landlord_data <- MSA_landlord_data %>% 
  mutate(
    eviction_notice_days_normalized = (eviction_notice_days-min(eviction_notice_days))/(max(eviction_notice_days)-min(eviction_notice_days)) 
  )

#"invert" normalized score for eviction notice days
#1 - normalized score (since more eviction notice is worse for landlords)
MSA_landlord_data <- MSA_landlord_data %>% 
  mutate(
    eviction_notice_days_normalized_inverted = 1 - eviction_notice_days_normalized
  )
```

```{r}
#calculate landlord category score

#input landlord weights for each indicator in the following order: eviction notice days, security deposit limit, notice for entry 

#Weights must sum to 1
landlord_weights <- c(0.9, 0.05, 0.05)

#make landlord_score column
MSA_landlord_data <- MSA_landlord_data %>% 
  mutate(
    landlord_score = MSA #this is just a place holder
  )
size <- dim(MSA_landlord_data)
for (i in 1:size[1]) {
  MSA_x_data <- c(MSA_landlord_data$eviction_notice_days_normalized_inverted[i],
                  MSA_landlord_data$security_depopsit_limit_num[i],
                  MSA_landlord_data$notice_for_entry_days_num[i]
                  )
  MSA_landlord_data$landlord_score[i] = weighted.mean(MSA_x_data, landlord_weights)
}
```

```{r}
#PICK UP HERE
#If there is rent control, immediately disqualify location 
```




