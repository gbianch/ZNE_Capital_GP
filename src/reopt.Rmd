---
title: "reOpt Data"
author: "Grace Bianchi"
date: "2023-01-17"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(janitor)
library(googlesheets4)
```


```{r}
# read in data
reopt_data <- read_sheet("https://docs.google.com/spreadsheets/d/1VROhOTWY4jSeI_zNgFui4ie6QiIz7uzzli8rF72fAyg/edit#gid=0") %>% 
  clean_names() %>% 
  drop_na()


```


```{r}
energy_production_metric <- reopt_data %>% 
  select(cbsa, city_msa, county, annual_renewable_electricity_percent_of_total) %>% 
  rename(annual_renewable_percent = annual_renewable_electricity_percent_of_total) %>% 
  # normalize data 
  mutate(normalized_annual_renewable = (annual_renewable_percent - min(annual_renewable_percent))/(max(annual_renewable_percent)-min(annual_renewable_percent)))
  

climate_impacts_metric <- reopt_data %>% 
  select(cbsa, city_msa, county, lifecycle_total_t_co2) %>% 
  # normalize total co2 
  mutate(normalized_total_co2 = (lifecycle_total_t_co2 - min(lifecycle_total_t_co2)) / (max(lifecycle_total_t_co2) - min(lifecycle_total_t_co2)))
  
financial_metric <- reopt_data %>% 
   select(cbsa, city_msa, county, irr) %>% 
  # normalize IRR
  mutate(normalized_irr = (irr - min(irr)) / (max(irr) - min(irr)))

health_impact_metric <- reopt_data  %>% 
   select(cbsa, city_msa, county, lifecycle_costs_of_health_emissions_difference_from_bau) %>% 
  rename(health_emissions_cost = lifecycle_costs_of_health_emissions_difference_from_bau) %>% 
  mutate(normalized_health_emission_cost = (health_emissions_cost - min(health_emissions_cost)) / (max(health_emissions_cost) - min(health_emissions_cost)))

```

